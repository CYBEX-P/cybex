

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Cybex-P Installation guide &mdash; cybex_web_app 0.9.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script >mermaid.initialize({startOnLoad:true});</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> cybex_web_app
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Front End</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Web Application</a></li>
</ul>
<p class="caption"><span class="caption-text">Back End</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="The_Cybex-P_Backend.html">The Cybex-P Backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_Input_Module.html">Cybex-P_Input_Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_API_Module.html">Cybex-P API Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_API_Module.html#small-common-small"><small> Common</small></a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_API_Module.html#small-config-small"><small>config</small></a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_API_Module.html#small-identity-small"><small> Identity </small></a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_Analytics_Module.html">Cybex-P_Analytics_Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_Archive_Module.html">Cybex-P_Archive_Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cybex-P_Report_Module.html">Cybex-P_Report_Module</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cybex.cse.unr.edu/backendapi">Interactive Backend API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cybex_web_app</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Cybex-P Installation guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Cybex-P_Installation_Guide.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cybex-p-installation-guide">
<h1>Cybex-P Installation guide<a class="headerlink" href="#cybex-p-installation-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="environment-setup-and-tahoe-installation">
<h2>Environment setup and Tahoe Installation<a class="headerlink" href="#environment-setup-and-tahoe-installation" title="Permalink to this headline">¶</a></h2>
<p>To set up the the Cybex-P backend run the following list of commands.</p>
<p><strong>Note</strong>: Operating System used: Ubuntu (Debian)</p>
<ul class="simple">
<li><p>Create the python environment</p>
<ul>
<li><p>Depdendencys:</p>
<ul>
<li><p>Python3.9</p></li>
<li><p>Python3.9 Headers</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">$:</span> <span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python3.9</span> <span class="pre">python3.9-dev</span></code></p>
</div>
<div class="section" id="tahoe-installation-and-setup">
<h2>TAHOE Installation and setup<a class="headerlink" href="#tahoe-installation-and-setup" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Downloading The Tahoe Module Code:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$: `git clone https://github.com/CYBEX-P/tahoe.git`
</pre></div>
</div>
<ul class="simple">
<li><p>Activate the Tahoe virtual environment</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$: `python3.9 -m venv &lt;venv-name&gt;`
$: `source &lt;venv-name&gt;/bin/activate`
(example_name)$: //&lt;------- You should be in your virtual environment now
</pre></div>
</div>
<ul class="simple">
<li><p>For activating on Windows —</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$: `python3.9 -m venv &lt;venv-name&gt;`
$: `&lt;venv-name&gt;/Scripts/activate.bat`
(example_name)$: //&lt;------- You should be in your virtual environment now
</pre></div>
</div>
<ul class="simple">
<li><p>Installing Tahoe Dependencies into Tahoe’s virtual environment</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(example_name) $: `pip install -r  &lt;project-dir&gt;/requirements.txt`
(example_name) $: `cd tahoe`
(example_name) $: `python -m unittest` (optional)
runs unit test (optional)
</pre></div>
</div>
<ul class="simple">
<li><p>Installing  Tahoe</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(example_name) $: `python3,9 setup.py install`
</pre></div>
</div>
</div>
<div class="section" id="input-module-installation">
<h2><strong>Input Module Installation</strong><a class="headerlink" href="#input-module-installation" title="Permalink to this headline">¶</a></h2>
<p><em><strong>TODO</strong></em></p>
</div>
<div class="section" id="api-module-installation">
<h2><strong>API Module Installation</strong><a class="headerlink" href="#api-module-installation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Basic Installation:</p>
<ul>
<li><p>(example_name) $: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">&lt;project-dir&gt;/...</span></code></p></li>
<li><p>(example_name) $: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/CYBEX-P/cybexp-api.git</span></code></p></li>
<li><p>(example_name) $: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">cybexp-api</span></code></p></li>
<li><p>(example_name) $:<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
</ul>
</li>
<li><p>Unit testing:</p>
<ul>
<li><p>(example_name) $:<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">../cybexp-api</span></code></p></li>
<li><p>(example_name) $:<code class="docutils literal notranslate"><span class="pre">python3.9</span> <span class="pre">-m</span> <span class="pre">unittest</span></code></p></li>
</ul>
</li>
<li><p>Test run the environment:</p>
<ul>
<li><p>hupper -m api</p></li>
<li><p>curl http://localhost:5000/ping</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="archive-module-installation">
<h2><strong>Archive Module Installation</strong><a class="headerlink" href="#archive-module-installation" title="Permalink to this headline">¶</a></h2>
<p><em><strong>TODO</strong></em></p>
</div>
<div class="section" id="analytics-module-installation">
<h2><strong>Analytics Module Installation</strong><a class="headerlink" href="#analytics-module-installation" title="Permalink to this headline">¶</a></h2>
<p><em><strong>TODO</strong></em></p>
</div>
<div class="section" id="report-module-installation">
<h2><strong>Report Module Installation</strong><a class="headerlink" href="#report-module-installation" title="Permalink to this headline">¶</a></h2>
<p><em><strong>TODO</strong></em></p>
</div>
<div class="section" id="database-setup-and-installation-mongodb">
<h2>Database Setup and Installation (MongoDB)<a class="headerlink" href="#database-setup-and-installation-mongodb" title="Permalink to this headline">¶</a></h2>
<p>Cybex-P uses MongoDB as its relational database in storing and comparing threat data</p>
<p>As for setting up the database, all that is needed is a simple installation of MongoDB. The Cybex-P configuration settings and code will handle the rest at run-time.</p>
<p>To install MongoDB, execute the following commands:</p>
<ul class="simple">
<li><p>Install gnupg</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">gnupg</span>
</pre></div>
</div>
<ul class="simple">
<li><p>importing the MongoDB public GPG key</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">qO</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">mongodb</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">pgp</span><span class="o">/</span><span class="n">server</span><span class="o">-</span><span class="mf">4.4</span><span class="o">.</span><span class="n">asc</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Appending mongodb to apt sources list</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;deb http://repo.mongodb.org/apt/debian buster/mongodb-org/4.4 main&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="n">org</span><span class="o">-</span><span class="mf">4.4</span><span class="o">.</span><span class="n">list</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Updating the apt package list</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Installing the latest stable version of MongoDB</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">mongodb</span><span class="o">-</span><span class="n">org</span>
</pre></div>
</div>
<p>At this point your mongodb installation is complete, execute the following commands to initialize the mongodb systemd daemon:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">start</span> <span class="n">mongod</span>
</pre></div>
</div>
<p>If the following prompt comes up:
<em><strong>Failed to start mongod.service: Unit mongod.service not found.</strong></em></p>
<p>Execute the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</pre></div>
</div>
<p>Then run the systemctl start command again.</p>
<p>For any other concerns and additional functionality and support on MongoDB, consult the following <a class="reference external" href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-debian/">documentation</a>.</p>
</div>
<div class="section" id="systemd-services-debian">
<h2>Systemd Services (Debian)<a class="headerlink" href="#systemd-services-debian" title="Permalink to this headline">¶</a></h2>
<p>Each Module of the Cybex-P backend has their own systemd Service file to handle execution and monitoring.</p>
<p>Below you will find a basic example of setting up the systemd service files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#This systemd file executes and maintains Cybex-P&#39;s Archive Module</span>

<span class="p">[</span><span class="n">Unit</span><span class="p">]</span>
<span class="n">Description</span><span class="o">=</span><span class="n">Cybex</span><span class="o">-</span><span class="n">P</span> <span class="n">archive</span> <span class="n">Module</span>
<span class="n">After</span><span class="o">=</span><span class="n">network</span><span class="o">-</span><span class="n">online</span><span class="o">.</span><span class="n">target</span>

<span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="n">User</span><span class="o">=</span><span class="n">cybexp</span><span class="o">-</span><span class="n">archive</span>
<span class="n">Group</span><span class="o">=</span><span class="n">cybexp</span><span class="o">-</span><span class="n">archive</span>
<span class="n">WorkingDirectory</span><span class="o">=../&lt;</span><span class="n">proj</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;/</span><span class="n">archive</span>
<span class="n">Type</span><span class="o">=</span><span class="n">simple</span>
<span class="n">ExecStart</span><span class="o">=../</span><span class="n">cybexp</span><span class="o">/</span><span class="n">env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span> <span class="o">../&lt;</span><span class="n">project</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;/</span><span class="n">archive</span><span class="o">/</span><span class="n">archive</span><span class="o">.</span><span class="n">py</span>

<span class="n">Restart</span><span class="o">=</span><span class="n">on</span><span class="o">-</span><span class="n">failure</span>
<span class="n">RestartSec</span><span class="o">=</span><span class="mi">5</span>

<span class="p">[</span><span class="n">Install</span><span class="p">]</span>
<span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span>

</pre></div>
</div>
<p>In the template above replace the following parameters with the indicated values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">../&lt;proj-dir&gt;/</span></code> - The full directory leading to where the module is stored</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">archive</span></code> - Name of the module for the systemd service file</p></li>
</ul>
<p>There should be 5 linux systemd service files that serve and maintain all of the Cybex-P Modules</p>
<div class="section" id="creating-the-service-files">
<h3>Creating the service files<a class="headerlink" href="#creating-the-service-files" title="Permalink to this headline">¶</a></h3>
<hr class="docutils" />
<p>To make the cybex-p systemd service files, simply do the following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$: cd /etc/systemd/system
$: touch cybexp_archive.service
$: nano cybexp_archive.service
</pre></div>
</div>
<p>Replace the following to any appropriate name of the module you are constructing the systemd file for:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cybex_archive.service</span></code> - the name of whichever module’s systemd file is currently being created (E.G: <code class="docutils literal notranslate"><span class="pre">cybexp_api.service</span></code>)</p></li>
</ul>
<p>Then write in the template above and adjust accordingly to where your python3.9 cybex-p virtual environment and module is located</p>
</div>
<div class="section" id="executing-cybex-systemd-services">
<h3>Executing Cybex Systemd Services<a class="headerlink" href="#executing-cybex-systemd-services" title="Permalink to this headline">¶</a></h3>
<hr class="docutils" />
<p>Once all systemd service files have been provisioned to the Cybex-P modules. Run the following to command on all service files to execute the modules.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$: systemctl start ***
</pre></div>
</div>
<ul class="simple">
<li><p>Replacing <code class="docutils literal notranslate"><span class="pre">***</span></code> with the name of a module ( E.G: <code class="docutils literal notranslate"><span class="pre">cybex_archive</span></code> )</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Adam Cassell.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>